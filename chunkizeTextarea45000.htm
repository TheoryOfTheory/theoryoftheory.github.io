<!DOCTYPE html>
<html>
<head>
<script>
function fallbackCopyTextToClipboard(text) {
  var textArea = document.createElement("textarea");
  textArea.value = text;
  
  // Avoid scrolling to bottom
  textArea.style.top = "0";
  textArea.style.left = "0";
  textArea.style.position = "fixed";

  document.body.appendChild(textArea);
  textArea.focus();
  textArea.select();

  try {
    var successful = document.execCommand('copy');
    var msg = successful ? 'successful' : 'unsuccessful';
    console.log('Fallback: Copying text command was ' + msg);
  } catch (err) {
    console.error('Fallback: Oops, unable to copy', err);
  }

  document.body.removeChild(textArea);
}
function copyTextToClipboard(text) {
  if (!navigator.clipboard) {
    fallbackCopyTextToClipboard(text);
    return;
  }
  navigator.clipboard.writeText(text).then(function() {
    console.log('Async: Copying to clipboard was successful!');
  }, function(err) {
    console.error('Async: Could not copy text: ', err);
  });
}
</script>
<script>
function copyall() {
    sText = $$$a(".chunk50000").map(o=>o.value.replace(/\n/g, "¶").replace(/\r/g, "¶")).reduce((a,e,i)=>{return a + "\n" + e;}, "").trim()
    copyTextToClipboard(sText);
} 
</script>


<script src="https://yayinternets.github.io/datascripts.js"></script>
<script src="https://yayinternets.github.io/domscripts.js"></script>
<link rel="stylesheet" href="https://yayinternets.github.io/datacss.css">

        <title>Chunkize 45000/50000 textarea for gs cells</title>
        <script type="text/javascript">document.addEventListener("DOMContentLoaded", function(event) { 
                if (oGetAllParameters_CLIENT()?.chunksize) {
                    document.querySelectorAll("#chunksize")[0].value = oGetAllParameters_CLIENT()?.chunksize;
                } else {
                    document.querySelectorAll("#chunksize")[0].value = "45000";
                }

         }); </script>

</head>
<body>

<style>

textarea { width: 1445px; height: 311px; }

.chunk50000 { background-color: lightcyan; }

</style>

        <textarea id="myTextarea" oninput="splitTextarea()"></textarea><br /><br />
        <br /><a href="https://theoryoftheory.github.io/chunkizeTextarea45000.htm?chunksize=150">click here</a> for 150-sized chunks
        <div>Paste in large data above and textareas of gs-friendly <input id="chunksize"></input>-sized chunks will appear below: <button onclick="copyall()">Copy All</button></div>
        <div id="chunkedTextareas">Paste in large data above and textareas of gs-friendly <input id="chunksize"></input>-sized chunks will appear below: <button onclick="copyall()">Copy All</button></div>

        <br /><br />

        <script>
                function splitTextarea() {
                        const textarea = document.getElementById("myTextarea");
                        const chunkedTextareas = document.getElementById("chunkedTextareas");
                        const text = textarea.value;
                        var i50000 = parseInt($$$$("#chunksize").value); // 45000; // 50000?

                        if (text.length > i50000) {
                                const chunks = [];

                                for (let i = 0; i < text.length; i += i50000) {
                                        chunks.push(text.substring(i, i + i50000));
                                }

                                chunkedTextareas.innerHTML = chunks.map(chunk => `<br /><br /><div><textarea class="chunk50000">${chunk}</textarea><br /><button onclick="copy">copy</button></div>`).join("");
                        } else {
                                chunkedTextareas.innerHTML = "";
                        }
                }
        </script>
</body>
</html>